import{c as Br,j as c,d as We,b as Wr,r as Y,R as ue,g as nt,a as it,h as de,v as kt}from"./index-BG_VkI2D.js";import{S as Ut,T as qr,a as Hr}from"./TransactionFilters-BuDEiDAm.js";import{a as Jr}from"./calculate-balance-D-teRt_A.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Xr=Br("arrow-left",Yr),Gr=[{key:"transfer",label:"Make a Transaction"},{key:"bizum",label:"Send via Bizum"},{key:"withdrawal",label:"Money operation"}],Qr=[{key:"undo",label:"Undo Operation"},{key:"update",label:"Update Operation"},{key:"reuse",label:"Reuse Operation"}],Kr=({onSelect:t})=>c.jsxs("section",{className:"max-w-md w-full mx-auto p-6 rounded-2xl shadow-md bg-color-background-light dark:bg-background-dark transition-colors",children:[c.jsx("h2",{className:"text-xl font-semibold text-center mb-6 text-gray-800 dark:text-white",children:"What would you like to do?"}),c.jsx("div",{className:"flex flex-col gap-4",children:Gr.map(({key:e,label:r})=>c.jsx("button",{onClick:()=>t(e),className:`
                bg-rose-base 
                hover:bg-rose-hover 
                active:bg-rose-active
                text-white 
                font-medium 
                py-3 
                px-4 
                rounded-xl 
                transition 
                focus:outline-none 
                focus:ring-2 
                focus:ring-offset-2 
                focus:ring--rose-hover 
                focus:ring-offset-white 
                dark:focus:ring-offset-background-dark
                cursor-pointer
              `,children:r},e))}),c.jsx("div",{className:"flex flex-col gap-4 mt-16",children:Qr.map(({key:e,label:r})=>c.jsx("button",{onClick:()=>t(e),className:`
              border-2
                border-rose-base 
                hover:border-rose-hover 
                hover:bg-rose-50
                active:border-rose-active
                text-gray-500
                dark:text-white
                hover:text-rose-hover
                active:text-rose-active
                font-medium 
                py-3 
                px-4 
                rounded-xl 
                transition 
                focus:outline-none 
                focus:ring-2 
                focus:ring-offset-2 
                focus:ring--rose-hover 
                focus:ring-offset-white 
                dark:focus:ring-offset-background-dark
                cursor-pointer
              `,children:r},e))})]}),ht=20,Bt=({title:t,setSelected:e,onClick:r})=>{const{state:{transactions:s}}=We("History"),{currency:a}=Wr(),[n,i]=Y.useState({from:"",to:"",type:"Withdrawal",description:"",page:1}),[d,h]=Y.useState(!1),f=I=>{i({...n,[I.target.name]:I.target.value,page:1})},m=Y.useMemo(()=>s.filter(I=>{const O=new Date(I.date),V=n.from?new Date(n.from):null,L=n.to?new Date(n.to):null;return(!V||O>=V)&&(!L||O<=L)&&I.description.toLowerCase().includes(n.description.toLowerCase())}).sort((I,O)=>new Date(O.date).getTime()-new Date(I.date).getTime()),[s,n]),j=m.slice((n.page-1)*ht,n.page*ht),w=Math.ceil(m.length/ht);return c.jsxs("section",{className:"w-full max-w-3xl mx-auto",children:[c.jsxs("button",{type:"button",className:"font-medium pb-2 transition flex gap-2 items-center",onClick:()=>e==null?void 0:e(null),children:[c.jsx(Xr,{color:"#ef1660"}),c.jsx("span",{className:"text-rose-base",children:"Go back"})]}),c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:t}),c.jsx("div",{className:"flex gap-4",children:c.jsx("button",{onClick:()=>h(!d),className:"text-sm text-rose-base hover:text-color-rose-hover cursor-pointer",children:d?c.jsx(Ut,{color:"#ef1660",size:20}):c.jsx(Ut,{color:"#71717A",size:20})})})]}),d&&c.jsx(qr,{filter:n,withType:!1,onChange:f}),c.jsx("div",{className:"h-[600px] overflow-y-auto space-y-2 pr-1 scroll-smooth scroll-hidden",children:j.length>0?j.map(I=>c.jsxs("div",{className:"p-4 border border-gray-300 dark:border-gray-100 rounded shadow-sm flex justify-between items-center bg-white dark:bg-background-dark hover:bg-gray-100 dark:hover:bg-zinc-700 cursor-pointer",onClick:()=>r==null?void 0:r(I),children:[c.jsx("div",{className:"w-[35%]",children:c.jsx("p",{className:"font-bold text-sm text-gray-800 dark:text-gray-100",children:I.date})}),c.jsx("div",{className:"w-[40%]",children:c.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-gray-100",children:I.description})}),c.jsxs("div",{className:`text-sm font-bold w-[25%] ${I.type==="Deposit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[Jr(a,I.amount).toFixed(2),a==="EUR"?"â‚¬":"$"]})]},I.id)):c.jsx("p",{className:"text-center text-gray-400 text-sm mt-10",children:"No hay transacciones para mostrar."})}),w>1&&c.jsx("div",{className:"mt-4 flex justify-center gap-2",children:Array.from({length:w}).map((I,O)=>c.jsx("button",{onClick:()=>i({...n,page:O+1}),className:`px-3 py-1 rounded border text-sm transition ${n.page===O+1?"bg-rose-base text-white":"bg-white dark:bg-gray-700 text-gray-800 dark:text-white"}`,children:O+1},O))})]})},es=({isOpen:t,onClose:e,onConfirm:r,title:s="Are you sure?",description:a="Do you really want to proceed with this action?"})=>{const n=Y.useRef(null);return Y.useEffect(()=>{const i=d=>{d.key==="Escape"&&e()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),t?c.jsx("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 dark:bg-black/60 p-4",children:c.jsxs("div",{ref:n,className:"w-full max-w-sm p-6 rounded-lg shadow-lg bg-white dark:bg-background-dark text-gray-800 dark:text-white transition-colors",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s}),c.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:a}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 text-sm bg-gray-200 dark:border dark:border-rose-base dark:bg-gray-700 dark:text-white text-gray-800 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-semibold bg-rose-base text-white rounded hover:bg-rose-hover active:bg-rose-active focus:outline-none transition-colors",children:"Confirm"})]})]})}):null};var qe=t=>t.type==="checkbox",Te=t=>t instanceof Date,K=t=>t==null;const br=t=>typeof t=="object";var U=t=>!K(t)&&!Array.isArray(t)&&br(t)&&!Te(t),ts=t=>U(t)&&t.target?qe(t.target)?t.target.checked:t.target.value:t,rs=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,ss=(t,e)=>t.has(rs(e)),as=t=>{const e=t.constructor&&t.constructor.prototype;return U(e)&&e.hasOwnProperty("isPrototypeOf")},wt=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function J(t){let e;const r=Array.isArray(t),s=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(wt&&(t instanceof Blob||s))&&(r||U(t)))if(e=r?[]:{},!r&&!as(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=J(t[a]));else return t;return e}var ot=t=>Array.isArray(t)?t.filter(Boolean):[],W=t=>t===void 0,_=(t,e,r)=>{if(!e||!U(t))return r;const s=ot(e.split(/[,[\].]+?/)).reduce((a,n)=>K(a)?a:a[n],t);return W(s)||s===t?W(t[e])?r:t[e]:s},fe=t=>typeof t=="boolean",Nt=t=>/^\w*$/.test(t),kr=t=>ot(t.replace(/["|']|\]/g,"").split(/\.|\[/)),M=(t,e,r)=>{let s=-1;const a=Nt(e)?[e]:kr(e),n=a.length,i=n-1;for(;++s<n;){const d=a[s];let h=r;if(s!==i){const f=t[d];h=U(f)||Array.isArray(f)?f:isNaN(+a[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;t[d]=h,t=t[d]}};const Wt={BLUR:"blur",FOCUS_OUT:"focusout"},ie={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ye={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};ue.createContext(null);var ns=(t,e,r,s=!0)=>{const a={defaultValues:e._defaultValues};for(const n in t)Object.defineProperty(a,n,{get:()=>{const i=n;return e._proxyFormState[i]!==ie.all&&(e._proxyFormState[i]=!s||ie.all),t[i]}});return a};const is=typeof window<"u"?Y.useLayoutEffect:Y.useEffect;var he=t=>typeof t=="string",os=(t,e,r,s,a)=>he(t)?(s&&e.watch.add(t),_(r,t,a)):Array.isArray(t)?t.map(n=>(s&&e.watch.add(n),_(r,n))):(s&&(e.watchAll=!0),r),wr=(t,e,r,s,a)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[s]:a||!0}}:{},Pe=t=>Array.isArray(t)?t:[t],qt=()=>{let t=[];return{get observers(){return t},next:a=>{for(const n of t)n.next&&n.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(n=>n!==a)}}),unsubscribe:()=>{t=[]}}},gt=t=>K(t)||!br(t);function _e(t,e){if(gt(t)||gt(e))return t===e;if(Te(t)&&Te(e))return t.getTime()===e.getTime();const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(const a of r){const n=t[a];if(!s.includes(a))return!1;if(a!=="ref"){const i=e[a];if(Te(n)&&Te(i)||U(n)&&U(i)||Array.isArray(n)&&Array.isArray(i)?!_e(n,i):n!==i)return!1}}return!0}var Q=t=>U(t)&&!Object.keys(t).length,At=t=>t.type==="file",oe=t=>typeof t=="function",Ge=t=>{if(!wt)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Nr=t=>t.type==="select-multiple",jt=t=>t.type==="radio",ds=t=>jt(t)||qe(t),mt=t=>Ge(t)&&t.isConnected;function ls(t,e){const r=e.slice(0,-1).length;let s=0;for(;s<r;)t=W(t)?s++:t[e[s++]];return t}function cs(t){for(const e in t)if(t.hasOwnProperty(e)&&!W(t[e]))return!1;return!0}function H(t,e){const r=Array.isArray(e)?e:Nt(e)?[e]:kr(e),s=r.length===1?t:ls(t,r),a=r.length-1,n=r[a];return s&&delete s[n],a!==0&&(U(s)&&Q(s)||Array.isArray(s)&&cs(s))&&H(t,r.slice(0,-1)),t}var Ar=t=>{for(const e in t)if(oe(t[e]))return!0;return!1};function Qe(t,e={}){const r=Array.isArray(t);if(U(t)||r)for(const s in t)Array.isArray(t[s])||U(t[s])&&!Ar(t[s])?(e[s]=Array.isArray(t[s])?[]:{},Qe(t[s],e[s])):K(t[s])||(e[s]=!0);return e}function jr(t,e,r){const s=Array.isArray(t);if(U(t)||s)for(const a in t)Array.isArray(t[a])||U(t[a])&&!Ar(t[a])?W(e)||gt(r[a])?r[a]=Array.isArray(t[a])?Qe(t[a],[]):{...Qe(t[a])}:jr(t[a],K(e)?{}:e[a],r[a]):r[a]=!_e(t[a],e[a]);return r}var Me=(t,e)=>jr(t,e,Qe(e));const Ht={value:!1,isValid:!1},Jt={value:!0,isValid:!0};var Tr=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!W(t[0].attributes.value)?W(t[0].value)||t[0].value===""?Jt:{value:t[0].value,isValid:!0}:Jt:Ht}return Ht},Sr=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:s})=>W(t)?t:e?t===""?NaN:t&&+t:r&&he(t)?new Date(t):s?s(t):t;const Yt={isValid:!1,value:null};var Cr=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,Yt):Yt;function Xt(t){const e=t.ref;return At(e)?e.files:jt(e)?Cr(t.refs).value:Nr(e)?[...e.selectedOptions].map(({value:r})=>r):qe(e)?Tr(t.refs).value:Sr(W(e.value)?t.ref.value:e.value,t)}var us=(t,e,r,s)=>{const a={};for(const n of t){const i=_(e,n);i&&M(a,n,i._f)}return{criteriaMode:r,names:[...t],fields:a,shouldUseNativeValidation:s}},Ke=t=>t instanceof RegExp,Le=t=>W(t)?t:Ke(t)?t.source:U(t)?Ke(t.value)?t.value.source:t.value:t,Gt=t=>({isOnSubmit:!t||t===ie.onSubmit,isOnBlur:t===ie.onBlur,isOnChange:t===ie.onChange,isOnAll:t===ie.all,isOnTouch:t===ie.onTouched});const Qt="AsyncFunction";var fs=t=>!!t&&!!t.validate&&!!(oe(t.validate)&&t.validate.constructor.name===Qt||U(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Qt)),hs=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Kt=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(s=>t.startsWith(s)&&/^\.\w+/.test(t.slice(s.length))));const ze=(t,e,r,s)=>{for(const a of r||Object.keys(t)){const n=_(t,a);if(n){const{_f:i,...d}=n;if(i){if(i.refs&&i.refs[0]&&e(i.refs[0],a)&&!s)return!0;if(i.ref&&e(i.ref,i.name)&&!s)return!0;if(ze(d,e))break}else if(U(d)&&ze(d,e))break}}};function er(t,e,r){const s=_(t,r);if(s||Nt(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const n=a.join("."),i=_(e,n),d=_(t,n);if(i&&!Array.isArray(i)&&r!==n)return{name:r};if(d&&d.type)return{name:n,error:d};a.pop()}return{name:r}}var ms=(t,e,r,s)=>{r(t);const{name:a,...n}=t;return Q(n)||Object.keys(n).length>=Object.keys(e).length||Object.keys(n).find(i=>e[i]===(!s||ie.all))},ys=(t,e,r)=>!t||!e||t===e||Pe(t).some(s=>s&&(r?s===e:s.startsWith(e)||e.startsWith(s))),gs=(t,e,r,s,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(e||t):(r?s.isOnBlur:a.isOnBlur)?!t:(r?s.isOnChange:a.isOnChange)?t:!0,ps=(t,e)=>!ot(_(t,e)).length&&H(t,e),xs=(t,e,r)=>{const s=Pe(_(t,r));return M(s,"root",e[r]),M(t,r,s),t},Xe=t=>he(t);function tr(t,e,r="validate"){if(Xe(t)||Array.isArray(t)&&t.every(Xe)||fe(t)&&!t)return{type:r,message:Xe(t)?t:"",ref:e}}var Oe=t=>U(t)&&!Ke(t)?t:{value:t,message:""},rr=async(t,e,r,s,a,n)=>{const{ref:i,refs:d,required:h,maxLength:f,minLength:m,min:j,max:w,pattern:I,validate:O,name:V,valueAsNumber:L,mount:re}=t._f,A=_(r,V);if(!re||e.has(V))return{};const P=d?d[0]:i,X=D=>{a&&P.reportValidity&&(P.setCustomValidity(fe(D)?"":D||""),P.reportValidity())},q={},He=jt(i),pe=qe(i),dt=He||pe,ne=(L||At(i))&&W(i.value)&&W(A)||Ge(i)&&i.value===""||A===""||Array.isArray(A)&&!A.length,je=wr.bind(null,V,s,q),le=(D,Z,z,G=ye.maxLength,ee=ye.minLength)=>{const ce=D?Z:z;q[V]={type:D?G:ee,message:ce,ref:i,...je(D?G:ee,ce)}};if(n?!Array.isArray(A)||!A.length:h&&(!dt&&(ne||K(A))||fe(A)&&!A||pe&&!Tr(d).isValid||He&&!Cr(d).isValid)){const{value:D,message:Z}=Xe(h)?{value:!!h,message:h}:Oe(h);if(D&&(q[V]={type:ye.required,message:Z,ref:P,...je(ye.required,Z)},!s))return X(Z),q}if(!ne&&(!K(j)||!K(w))){let D,Z;const z=Oe(w),G=Oe(j);if(!K(A)&&!isNaN(A)){const ee=i.valueAsNumber||A&&+A;K(z.value)||(D=ee>z.value),K(G.value)||(Z=ee<G.value)}else{const ee=i.valueAsDate||new Date(A),ce=Je=>new Date(new Date().toDateString()+" "+Je),Ze=i.type=="time",Ce=i.type=="week";he(z.value)&&A&&(D=Ze?ce(A)>ce(z.value):Ce?A>z.value:ee>new Date(z.value)),he(G.value)&&A&&(Z=Ze?ce(A)<ce(G.value):Ce?A<G.value:ee<new Date(G.value))}if((D||Z)&&(le(!!D,z.message,G.message,ye.max,ye.min),!s))return X(q[V].message),q}if((f||m)&&!ne&&(he(A)||n&&Array.isArray(A))){const D=Oe(f),Z=Oe(m),z=!K(D.value)&&A.length>+D.value,G=!K(Z.value)&&A.length<+Z.value;if((z||G)&&(le(z,D.message,Z.message),!s))return X(q[V].message),q}if(I&&!ne&&he(A)){const{value:D,message:Z}=Oe(I);if(Ke(D)&&!A.match(D)&&(q[V]={type:ye.pattern,message:Z,ref:i,...je(ye.pattern,Z)},!s))return X(Z),q}if(O){if(oe(O)){const D=await O(A,r),Z=tr(D,P);if(Z&&(q[V]={...Z,...je(ye.validate,Z.message)},!s))return X(Z.message),q}else if(U(O)){let D={};for(const Z in O){if(!Q(D)&&!s)break;const z=tr(await O[Z](A,r),P,Z);z&&(D={...z,...je(Z,z.message)},X(z.message),s&&(q[V]=D))}if(!Q(D)&&(q[V]={ref:P,...D},!s))return q}}return X(!0),q};const vs={mode:ie.onSubmit,reValidateMode:ie.onChange,shouldFocusError:!0};function _s(t={}){let e={...vs,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:oe(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const s={};let a=U(e.defaultValues)||U(e.values)?J(e.defaultValues||e.values)||{}:{},n=e.shouldUnregister?{}:J(a),i={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,f=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let j={...m};const w={array:qt(),state:qt()},I=e.criteriaMode===ie.all,O=o=>l=>{clearTimeout(f),f=setTimeout(o,l)},V=async o=>{if(!e.disabled&&(m.isValid||j.isValid||o)){const l=e.resolver?Q((await pe()).errors):await ne(s,!0);l!==r.isValid&&w.state.next({isValid:l})}},L=(o,l)=>{!e.disabled&&(m.isValidating||m.validatingFields||j.isValidating||j.validatingFields)&&((o||Array.from(d.mount)).forEach(u=>{u&&(l?M(r.validatingFields,u,l):H(r.validatingFields,u))}),w.state.next({validatingFields:r.validatingFields,isValidating:!Q(r.validatingFields)}))},re=(o,l=[],u,v,p=!0,g=!0)=>{if(v&&u&&!e.disabled){if(i.action=!0,g&&Array.isArray(_(s,o))){const N=u(_(s,o),v.argA,v.argB);p&&M(s,o,N)}if(g&&Array.isArray(_(r.errors,o))){const N=u(_(r.errors,o),v.argA,v.argB);p&&M(r.errors,o,N),ps(r.errors,o)}if((m.touchedFields||j.touchedFields)&&g&&Array.isArray(_(r.touchedFields,o))){const N=u(_(r.touchedFields,o),v.argA,v.argB);p&&M(r.touchedFields,o,N)}(m.dirtyFields||j.dirtyFields)&&(r.dirtyFields=Me(a,n)),w.state.next({name:o,isDirty:le(o,l),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else M(n,o,l)},A=(o,l)=>{M(r.errors,o,l),w.state.next({errors:r.errors})},P=o=>{r.errors=o,w.state.next({errors:r.errors,isValid:!1})},X=(o,l,u,v)=>{const p=_(s,o);if(p){const g=_(n,o,W(u)?_(a,o):u);W(g)||v&&v.defaultChecked||l?M(n,o,l?g:Xt(p._f)):z(o,g),i.mount&&V()}},q=(o,l,u,v,p)=>{let g=!1,N=!1;const F={name:o};if(!e.disabled){if(!u||v){(m.isDirty||j.isDirty)&&(N=r.isDirty,r.isDirty=F.isDirty=le(),g=N!==F.isDirty);const $=_e(_(a,o),l);N=!!_(r.dirtyFields,o),$?H(r.dirtyFields,o):M(r.dirtyFields,o,!0),F.dirtyFields=r.dirtyFields,g=g||(m.dirtyFields||j.dirtyFields)&&N!==!$}if(u){const $=_(r.touchedFields,o);$||(M(r.touchedFields,o,u),F.touchedFields=r.touchedFields,g=g||(m.touchedFields||j.touchedFields)&&$!==u)}g&&p&&w.state.next(F)}return g?F:{}},He=(o,l,u,v)=>{const p=_(r.errors,o),g=(m.isValid||j.isValid)&&fe(l)&&r.isValid!==l;if(e.delayError&&u?(h=O(()=>A(o,u)),h(e.delayError)):(clearTimeout(f),h=null,u?M(r.errors,o,u):H(r.errors,o)),(u?!_e(p,u):p)||!Q(v)||g){const N={...v,...g&&fe(l)?{isValid:l}:{},errors:r.errors,name:o};r={...r,...N},w.state.next(N)}},pe=async o=>{L(o,!0);const l=await e.resolver(n,e.context,us(o||d.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return L(o),l},dt=async o=>{const{errors:l}=await pe(o);if(o)for(const u of o){const v=_(l,u);v?M(r.errors,u,v):H(r.errors,u)}else r.errors=l;return l},ne=async(o,l,u={valid:!0})=>{for(const v in o){const p=o[v];if(p){const{_f:g,...N}=p;if(g){const F=d.array.has(g.name),$=p._f&&fs(p._f);$&&m.validatingFields&&L([v],!0);const se=await rr(p,d.disabled,n,I,e.shouldUseNativeValidation&&!l,F);if($&&m.validatingFields&&L([v]),se[g.name]&&(u.valid=!1,l))break;!l&&(_(se,g.name)?F?xs(r.errors,se,g.name):M(r.errors,g.name,se[g.name]):H(r.errors,g.name))}!Q(N)&&await ne(N,l,u)}}return u.valid},je=()=>{for(const o of d.unMount){const l=_(s,o);l&&(l._f.refs?l._f.refs.every(u=>!mt(u)):!mt(l._f.ref))&&lt(o)}d.unMount=new Set},le=(o,l)=>!e.disabled&&(o&&l&&M(n,o,l),!_e(Je(),a)),D=(o,l,u)=>os(o,d,{...i.mount?n:W(l)?a:he(o)?{[o]:l}:l},u,l),Z=o=>ot(_(i.mount?n:a,o,e.shouldUnregister?_(a,o,[]):[])),z=(o,l,u={})=>{const v=_(s,o);let p=l;if(v){const g=v._f;g&&(!g.disabled&&M(n,o,Sr(l,g)),p=Ge(g.ref)&&K(l)?"":l,Nr(g.ref)?[...g.ref.options].forEach(N=>N.selected=p.includes(N.value)):g.refs?qe(g.ref)?g.refs.forEach(N=>{(!N.defaultChecked||!N.disabled)&&(Array.isArray(p)?N.checked=!!p.find(F=>F===N.value):N.checked=p===N.value||!!p)}):g.refs.forEach(N=>N.checked=N.value===p):At(g.ref)?g.ref.value="":(g.ref.value=p,g.ref.type||w.state.next({name:o,values:J(n)})))}(u.shouldDirty||u.shouldTouch)&&q(o,p,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&Ce(o)},G=(o,l,u)=>{for(const v in l){if(!l.hasOwnProperty(v))return;const p=l[v],g=`${o}.${v}`,N=_(s,g);(d.array.has(o)||U(p)||N&&!N._f)&&!Te(p)?G(g,p,u):z(g,p,u)}},ee=(o,l,u={})=>{const v=_(s,o),p=d.array.has(o),g=J(l);M(n,o,g),p?(w.array.next({name:o,values:J(n)}),(m.isDirty||m.dirtyFields||j.isDirty||j.dirtyFields)&&u.shouldDirty&&w.state.next({name:o,dirtyFields:Me(a,n),isDirty:le(o,g)})):v&&!v._f&&!K(g)?G(o,g,u):z(o,g,u),Kt(o,d)&&w.state.next({...r}),w.state.next({name:i.mount?o:void 0,values:J(n)})},ce=async o=>{i.mount=!0;const l=o.target;let u=l.name,v=!0;const p=_(s,u),g=$=>{v=Number.isNaN($)||Te($)&&isNaN($.getTime())||_e($,_(n,u,$))},N=Gt(e.mode),F=Gt(e.reValidateMode);if(p){let $,se;const Ye=l.type?Xt(p._f):ts(o),xe=o.type===Wt.BLUR||o.type===Wt.FOCUS_OUT,Pr=!hs(p._f)&&!e.resolver&&!_(r.errors,u)&&!p._f.deps||gs(xe,_(r.touchedFields,u),r.isSubmitted,F,N),ut=Kt(u,d,xe);M(n,u,Ye),xe?(p._f.onBlur&&p._f.onBlur(o),h&&h(0)):p._f.onChange&&p._f.onChange(o);const ft=q(u,Ye,xe),zr=!Q(ft)||ut;if(!xe&&w.state.next({name:u,type:o.type,values:J(n)}),Pr)return(m.isValid||j.isValid)&&(e.mode==="onBlur"?xe&&V():xe||V()),zr&&w.state.next({name:u,...ut?{}:ft});if(!xe&&ut&&w.state.next({...r}),e.resolver){const{errors:Pt}=await pe([u]);if(g(Ye),v){const Ur=er(r.errors,s,u),zt=er(Pt,s,Ur.name||u);$=zt.error,u=zt.name,se=Q(Pt)}}else L([u],!0),$=(await rr(p,d.disabled,n,I,e.shouldUseNativeValidation))[u],L([u]),g(Ye),v&&($?se=!1:(m.isValid||j.isValid)&&(se=await ne(s,!0)));v&&(p._f.deps&&Ce(p._f.deps),He(u,se,$,ft))}},Ze=(o,l)=>{if(_(r.errors,l)&&o.focus)return o.focus(),1},Ce=async(o,l={})=>{let u,v;const p=Pe(o);if(e.resolver){const g=await dt(W(o)?o:p);u=Q(g),v=o?!p.some(N=>_(g,N)):u}else o?(v=(await Promise.all(p.map(async g=>{const N=_(s,g);return await ne(N&&N._f?{[g]:N}:N)}))).every(Boolean),!(!v&&!r.isValid)&&V()):v=u=await ne(s);return w.state.next({...!he(o)||(m.isValid||j.isValid)&&u!==r.isValid?{}:{name:o},...e.resolver||!o?{isValid:u}:{},errors:r.errors}),l.shouldFocus&&!v&&ze(s,Ze,o?p:d.mount),v},Je=o=>{const l={...i.mount?n:a};return W(o)?l:he(o)?_(l,o):o.map(u=>_(l,u))},Vt=(o,l)=>({invalid:!!_((l||r).errors,o),isDirty:!!_((l||r).dirtyFields,o),error:_((l||r).errors,o),isValidating:!!_(r.validatingFields,o),isTouched:!!_((l||r).touchedFields,o)}),Rr=o=>{o&&Pe(o).forEach(l=>H(r.errors,l)),w.state.next({errors:o?r.errors:{}})},Dt=(o,l,u)=>{const v=(_(s,o,{_f:{}})._f||{}).ref,p=_(r.errors,o)||{},{ref:g,message:N,type:F,...$}=p;M(r.errors,o,{...$,...l,ref:v}),w.state.next({name:o,errors:r.errors,isValid:!1}),u&&u.shouldFocus&&v&&v.focus&&v.focus()},Ir=(o,l)=>oe(o)?w.state.subscribe({next:u=>o(D(void 0,l),u)}):D(o,l,!0),Rt=o=>w.state.subscribe({next:l=>{ys(o.name,l.name,o.exact)&&ms(l,o.formState||m,$r,o.reRenderRoot)&&o.callback({values:{...n},...r,...l})}}).unsubscribe,Fr=o=>(i.mount=!0,j={...j,...o.formState},Rt({...o,formState:j})),lt=(o,l={})=>{for(const u of o?Pe(o):d.mount)d.mount.delete(u),d.array.delete(u),l.keepValue||(H(s,u),H(n,u)),!l.keepError&&H(r.errors,u),!l.keepDirty&&H(r.dirtyFields,u),!l.keepTouched&&H(r.touchedFields,u),!l.keepIsValidating&&H(r.validatingFields,u),!e.shouldUnregister&&!l.keepDefaultValue&&H(a,u);w.state.next({values:J(n)}),w.state.next({...r,...l.keepDirty?{isDirty:le()}:{}}),!l.keepIsValid&&V()},It=({disabled:o,name:l})=>{(fe(o)&&i.mount||o||d.disabled.has(l))&&(o?d.disabled.add(l):d.disabled.delete(l))},ct=(o,l={})=>{let u=_(s,o);const v=fe(l.disabled)||fe(e.disabled);return M(s,o,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:o}},name:o,mount:!0,...l}}),d.mount.add(o),u?It({disabled:fe(l.disabled)?l.disabled:e.disabled,name:o}):X(o,!0,l.value),{...v?{disabled:l.disabled||e.disabled}:{},...e.progressive?{required:!!l.required,min:Le(l.min),max:Le(l.max),minLength:Le(l.minLength),maxLength:Le(l.maxLength),pattern:Le(l.pattern)}:{},name:o,onChange:ce,onBlur:ce,ref:p=>{if(p){ct(o,l),u=_(s,o);const g=W(p.value)&&p.querySelectorAll&&p.querySelectorAll("input,select,textarea")[0]||p,N=ds(g),F=u._f.refs||[];if(N?F.find($=>$===g):g===u._f.ref)return;M(s,o,{_f:{...u._f,...N?{refs:[...F.filter(mt),g,...Array.isArray(_(a,o))?[{}]:[]],ref:{type:g.type,name:o}}:{ref:g}}}),X(o,!1,void 0,g)}else u=_(s,o,{}),u._f&&(u._f.mount=!1),(e.shouldUnregister||l.shouldUnregister)&&!(ss(d.array,o)&&i.action)&&d.unMount.add(o)}}},Ft=()=>e.shouldFocusError&&ze(s,Ze,d.mount),Zr=o=>{fe(o)&&(w.state.next({disabled:o}),ze(s,(l,u)=>{const v=_(s,u);v&&(l.disabled=v._f.disabled||o,Array.isArray(v._f.refs)&&v._f.refs.forEach(p=>{p.disabled=v._f.disabled||o}))},0,!1))},Zt=(o,l)=>async u=>{let v;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let p=J(n);if(w.state.next({isSubmitting:!0}),e.resolver){const{errors:g,values:N}=await pe();r.errors=g,p=N}else await ne(s);if(d.disabled.size)for(const g of d.disabled)M(p,g,void 0);if(H(r.errors,"root"),Q(r.errors)){w.state.next({errors:{}});try{await o(p,u)}catch(g){v=g}}else l&&await l({...r.errors},u),Ft(),setTimeout(Ft);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Q(r.errors)&&!v,submitCount:r.submitCount+1,errors:r.errors}),v)throw v},Mr=(o,l={})=>{_(s,o)&&(W(l.defaultValue)?ee(o,J(_(a,o))):(ee(o,l.defaultValue),M(a,o,J(l.defaultValue))),l.keepTouched||H(r.touchedFields,o),l.keepDirty||(H(r.dirtyFields,o),r.isDirty=l.defaultValue?le(o,J(_(a,o))):le()),l.keepError||(H(r.errors,o),m.isValid&&V()),w.state.next({...r}))},Mt=(o,l={})=>{const u=o?J(o):a,v=J(u),p=Q(o),g=p?a:v;if(l.keepDefaultValues||(a=u),!l.keepValues){if(l.keepDirtyValues){const N=new Set([...d.mount,...Object.keys(Me(a,n))]);for(const F of Array.from(N))_(r.dirtyFields,F)?M(g,F,_(n,F)):ee(F,_(g,F))}else{if(wt&&W(o))for(const N of d.mount){const F=_(s,N);if(F&&F._f){const $=Array.isArray(F._f.refs)?F._f.refs[0]:F._f.ref;if(Ge($)){const se=$.closest("form");if(se){se.reset();break}}}}for(const N of d.mount)ee(N,_(g,N))}n=J(g),w.array.next({values:{...g}}),w.state.next({values:{...g}})}d={mount:l.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!m.isValid||!!l.keepIsValid||!!l.keepDirtyValues,i.watch=!!e.shouldUnregister,w.state.next({submitCount:l.keepSubmitCount?r.submitCount:0,isDirty:p?!1:l.keepDirty?r.isDirty:!!(l.keepDefaultValues&&!_e(o,a)),isSubmitted:l.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:p?{}:l.keepDirtyValues?l.keepDefaultValues&&n?Me(a,n):r.dirtyFields:l.keepDefaultValues&&o?Me(a,o):l.keepDirty?r.dirtyFields:{},touchedFields:l.keepTouched?r.touchedFields:{},errors:l.keepErrors?r.errors:{},isSubmitSuccessful:l.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Lt=(o,l)=>Mt(oe(o)?o(n):o,l),Lr=(o,l={})=>{const u=_(s,o),v=u&&u._f;if(v){const p=v.refs?v.refs[0]:v.ref;p.focus&&(p.focus(),l.shouldSelect&&oe(p.select)&&p.select())}},$r=o=>{r={...r,...o}},$t={control:{register:ct,unregister:lt,getFieldState:Vt,handleSubmit:Zt,setError:Dt,_subscribe:Rt,_runSchema:pe,_getWatch:D,_getDirty:le,_setValid:V,_setFieldArray:re,_setDisabledField:It,_setErrors:P,_getFieldArray:Z,_reset:Mt,_resetDefaultValues:()=>oe(e.defaultValues)&&e.defaultValues().then(o=>{Lt(o,e.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:je,_disableForm:Zr,_subjects:w,_proxyFormState:m,get _fields(){return s},get _formValues(){return n},get _state(){return i},set _state(o){i=o},get _defaultValues(){return a},get _names(){return d},set _names(o){d=o},get _formState(){return r},get _options(){return e},set _options(o){e={...e,...o}}},subscribe:Fr,trigger:Ce,register:ct,handleSubmit:Zt,watch:Ir,setValue:ee,getValues:Je,reset:Lt,resetField:Mr,clearErrors:Rr,unregister:lt,setError:Dt,setFocus:Lr,getFieldState:Vt};return{...$t,formControl:$t}}function Tt(t={}){const e=ue.useRef(void 0),r=ue.useRef(void 0),[s,a]=ue.useState({isDirty:!1,isValidating:!1,isLoading:oe(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:oe(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:_s(t),formState:s},t.formControl&&t.defaultValues&&!oe(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const n=e.current.control;return n._options=t,is(()=>{const i=n._subscribe({formState:n._proxyFormState,callback:()=>a({...n._formState}),reRenderRoot:!0});return a(d=>({...d,isReady:!0})),n._formState.isReady=!0,i},[n]),ue.useEffect(()=>n._disableForm(t.disabled),[n,t.disabled]),ue.useEffect(()=>{t.mode&&(n._options.mode=t.mode),t.reValidateMode&&(n._options.reValidateMode=t.reValidateMode),t.errors&&!Q(t.errors)&&n._setErrors(t.errors)},[n,t.errors,t.mode,t.reValidateMode]),ue.useEffect(()=>{t.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,t.shouldUnregister]),ue.useEffect(()=>{if(n._proxyFormState.isDirty){const i=n._getDirty();i!==s.isDirty&&n._subjects.state.next({isDirty:i})}},[n,s.isDirty]),ue.useEffect(()=>{t.values&&!_e(t.values,r.current)?(n._reset(t.values,n._options.resetOptions),r.current=t.values,a(i=>({...i}))):n._resetDefaultValues()},[n,t.values]),ue.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),e.current.formState=ns(s,n),e.current}var R;(function(t){t.assertEqual=a=>{};function e(a){}t.assertIs=e;function r(a){throw new Error}t.assertNever=r,t.arrayToEnum=a=>{const n={};for(const i of a)n[i]=i;return n},t.getValidEnumValues=a=>{const n=t.objectKeys(a).filter(d=>typeof a[a[d]]!="number"),i={};for(const d of n)i[d]=a[d];return t.objectValues(i)},t.objectValues=a=>t.objectKeys(a).map(function(n){return a[n]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const n=[];for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&n.push(i);return n},t.find=(a,n)=>{for(const i of a)if(n(i))return i},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function s(a,n=" | "){return a.map(i=>typeof i=="string"?`'${i}'`:i).join(n)}t.joinValues=s,t.jsonStringifyReplacer=(a,n)=>typeof n=="bigint"?n.toString():n})(R||(R={}));var sr;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(sr||(sr={}));const b=R.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ve=t=>{switch(typeof t){case"undefined":return b.undefined;case"string":return b.string;case"number":return Number.isNaN(t)?b.nan:b.number;case"boolean":return b.boolean;case"function":return b.function;case"bigint":return b.bigint;case"symbol":return b.symbol;case"object":return Array.isArray(t)?b.array:t===null?b.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?b.promise:typeof Map<"u"&&t instanceof Map?b.map:typeof Set<"u"&&t instanceof Set?b.set:typeof Date<"u"&&t instanceof Date?b.date:b.object;default:return b.unknown}},y=R.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ge extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(n){return n.message},s={_errors:[]},a=n=>{for(const i of n.issues)if(i.code==="invalid_union")i.unionErrors.map(a);else if(i.code==="invalid_return_type")a(i.returnTypeError);else if(i.code==="invalid_arguments")a(i.argumentsError);else if(i.path.length===0)s._errors.push(r(i));else{let d=s,h=0;for(;h<i.path.length;){const f=i.path[h];h===i.path.length-1?(d[f]=d[f]||{_errors:[]},d[f]._errors.push(r(i))):d[f]=d[f]||{_errors:[]},d=d[f],h++}}};return a(this),s}static assert(e){if(!(e instanceof ge))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,R.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},s=[];for(const a of this.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(e(a))):s.push(e(a));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}}ge.create=t=>new ge(t);const pt=(t,e)=>{let r;switch(t.code){case y.invalid_type:t.received===b.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case y.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,R.jsonStringifyReplacer)}`;break;case y.unrecognized_keys:r=`Unrecognized key(s) in object: ${R.joinValues(t.keys,", ")}`;break;case y.invalid_union:r="Invalid input";break;case y.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${R.joinValues(t.options)}`;break;case y.invalid_enum_value:r=`Invalid enum value. Expected ${R.joinValues(t.options)}, received '${t.received}'`;break;case y.invalid_arguments:r="Invalid function arguments";break;case y.invalid_return_type:r="Invalid function return type";break;case y.invalid_date:r="Invalid date";break;case y.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:R.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case y.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case y.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case y.custom:r="Invalid input";break;case y.invalid_intersection_types:r="Intersection results could not be merged";break;case y.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case y.not_finite:r="Number must be finite";break;default:r=e.defaultError,R.assertNever(t)}return{message:r}};let bs=pt;function ks(){return bs}const ws=t=>{const{data:e,path:r,errorMaps:s,issueData:a}=t,n=[...r,...a.path||[]],i={...a,path:n};if(a.message!==void 0)return{...a,path:n,message:a.message};let d="";const h=s.filter(f=>!!f).slice().reverse();for(const f of h)d=f(i,{data:e,defaultError:d}).message;return{...a,path:n,message:d}};function x(t,e){const r=ks(),s=ws({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===pt?void 0:pt].filter(a=>!!a)});t.common.issues.push(s)}class te{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const s=[];for(const a of r){if(a.status==="aborted")return T;a.status==="dirty"&&e.dirty(),s.push(a.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,r){const s=[];for(const a of r){const n=await a.key,i=await a.value;s.push({key:n,value:i})}return te.mergeObjectSync(e,s)}static mergeObjectSync(e,r){const s={};for(const a of r){const{key:n,value:i}=a;if(n.status==="aborted"||i.status==="aborted")return T;n.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),n.value!=="__proto__"&&(typeof i.value<"u"||a.alwaysSet)&&(s[n.value]=i.value)}return{status:e.value,value:s}}}const T=Object.freeze({status:"aborted"}),$e=t=>({status:"dirty",value:t}),ae=t=>({status:"valid",value:t}),ar=t=>t.status==="aborted",nr=t=>t.status==="dirty",Ve=t=>t.status==="valid",et=t=>typeof Promise<"u"&&t instanceof Promise;var k;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(k||(k={}));class Ne{constructor(e,r,s,a){this._cachedPath=[],this.parent=e,this.data=r,this._path=s,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ir=(t,e)=>{if(Ve(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ge(t.common.issues);return this._error=r,this._error}}};function C(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:s,description:a}=t;if(e&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(i,d)=>{const{message:h}=t;return i.code==="invalid_enum_value"?{message:h??d.defaultError}:typeof d.data>"u"?{message:h??s??d.defaultError}:i.code!=="invalid_type"?{message:d.defaultError}:{message:h??r??d.defaultError}},description:a}}class E{get description(){return this._def.description}_getType(e){return ve(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ve(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new te,ctx:{common:e.parent.common,data:e.data,parsedType:ve(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(et(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const s=this.safeParse(e,r);if(s.success)return s.data;throw s.error}safeParse(e,r){const s={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ve(e)},a=this._parseSync({data:e,path:s.path,parent:s});return ir(s,a)}"~validate"(e){var s,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ve(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:r});return Ve(n)?{value:n.value}:{issues:r.common.issues}}catch(n){(a=(s=n==null?void 0:n.message)==null?void 0:s.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>Ve(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){const s=await this.safeParseAsync(e,r);if(s.success)return s.data;throw s.error}async safeParseAsync(e,r){const s={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ve(e)},a=this._parse({data:e,path:s.path,parent:s}),n=await(et(a)?a:Promise.resolve(a));return ir(s,n)}refine(e,r){const s=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,n)=>{const i=e(a),d=()=>n.addIssue({code:y.custom,...s(a)});return typeof Promise<"u"&&i instanceof Promise?i.then(h=>h?!0:(d(),!1)):i?!0:(d(),!1)})}refinement(e,r){return this._refinement((s,a)=>e(s)?!0:(a.addIssue(typeof r=="function"?r(s,a):r),!1))}_refinement(e){return new Ie({schema:this,typeName:S.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ke.create(this,this._def)}nullable(){return Fe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return me.create(this)}promise(){return at.create(this,this._def)}or(e){return rt.create([this,e],this._def)}and(e){return st.create(this,e,this._def)}transform(e){return new Ie({...C(this._def),schema:this,typeName:S.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new vt({...C(this._def),innerType:this,defaultValue:r,typeName:S.ZodDefault})}brand(){return new qs({typeName:S.ZodBranded,type:this,...C(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new _t({...C(this._def),innerType:this,catchValue:r,typeName:S.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return St.create(this,e)}readonly(){return bt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ns=/^c[^\s-]{8,}$/i,As=/^[0-9a-z]+$/,js=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ts=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ss=/^[a-z0-9_-]{21}$/i,Cs=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Os=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Es=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Vs="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let yt;const Ds=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Rs=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Is=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Fs=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Zs=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ms=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Or="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ls=new RegExp(`^${Or}$`);function Er(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function $s(t){return new RegExp(`^${Er(t)}$`)}function Ps(t){let e=`${Or}T${Er(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function zs(t,e){return!!((e==="v4"||!e)&&Ds.test(t)||(e==="v6"||!e)&&Is.test(t))}function Us(t,e){if(!Cs.test(t))return!1;try{const[r]=t.split("."),s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(s));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function Bs(t,e){return!!((e==="v4"||!e)&&Rs.test(t)||(e==="v6"||!e)&&Fs.test(t))}class be extends E{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==b.string){const n=this._getOrReturnCtx(e);return x(n,{code:y.invalid_type,expected:b.string,received:n.parsedType}),T}const s=new te;let a;for(const n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(a=this._getOrReturnCtx(e,a),x(a,{code:y.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="max")e.data.length>n.value&&(a=this._getOrReturnCtx(e,a),x(a,{code:y.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="length"){const i=e.data.length>n.value,d=e.data.length<n.value;(i||d)&&(a=this._getOrReturnCtx(e,a),i?x(a,{code:y.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):d&&x(a,{code:y.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),s.dirty())}else if(n.kind==="email")Es.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"email",code:y.invalid_string,message:n.message}),s.dirty());else if(n.kind==="emoji")yt||(yt=new RegExp(Vs,"u")),yt.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"emoji",code:y.invalid_string,message:n.message}),s.dirty());else if(n.kind==="uuid")Ts.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"uuid",code:y.invalid_string,message:n.message}),s.dirty());else if(n.kind==="nanoid")Ss.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"nanoid",code:y.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid")Ns.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"cuid",code:y.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid2")As.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"cuid2",code:y.invalid_string,message:n.message}),s.dirty());else if(n.kind==="ulid")js.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"ulid",code:y.invalid_string,message:n.message}),s.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),x(a,{validation:"url",code:y.invalid_string,message:n.message}),s.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"regex",code:y.invalid_string,message:n.message}),s.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(a=this._getOrReturnCtx(e,a),x(a,{code:y.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),s.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(a=this._getOrReturnCtx(e,a),x(a,{code:y.invalid_string,validation:{startsWith:n.value},message:n.message}),s.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(a=this._getOrReturnCtx(e,a),x(a,{code:y.invalid_string,validation:{endsWith:n.value},message:n.message}),s.dirty()):n.kind==="datetime"?Ps(n).test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{code:y.invalid_string,validation:"datetime",message:n.message}),s.dirty()):n.kind==="date"?Ls.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{code:y.invalid_string,validation:"date",message:n.message}),s.dirty()):n.kind==="time"?$s(n).test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{code:y.invalid_string,validation:"time",message:n.message}),s.dirty()):n.kind==="duration"?Os.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"duration",code:y.invalid_string,message:n.message}),s.dirty()):n.kind==="ip"?zs(e.data,n.version)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"ip",code:y.invalid_string,message:n.message}),s.dirty()):n.kind==="jwt"?Us(e.data,n.alg)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"jwt",code:y.invalid_string,message:n.message}),s.dirty()):n.kind==="cidr"?Bs(e.data,n.version)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"cidr",code:y.invalid_string,message:n.message}),s.dirty()):n.kind==="base64"?Zs.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"base64",code:y.invalid_string,message:n.message}),s.dirty()):n.kind==="base64url"?Ms.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"base64url",code:y.invalid_string,message:n.message}),s.dirty()):R.assertNever(n);return{status:s.value,value:e.data}}_regex(e,r,s){return this.refinement(a=>e.test(a),{validation:r,code:y.invalid_string,...k.errToObj(s)})}_addCheck(e){return new be({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...k.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...k.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...k.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...k.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...k.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...k.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...k.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...k.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...k.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...k.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...k.errToObj(r)})}nonempty(e){return this.min(1,k.errToObj(e))}trim(){return new be({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new be({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new be({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}be.create=t=>new be({checks:[],typeName:S.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...C(t)});function Ws(t,e){const r=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,a=r>s?r:s,n=Number.parseInt(t.toFixed(a).replace(".","")),i=Number.parseInt(e.toFixed(a).replace(".",""));return n%i/10**a}class De extends E{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==b.number){const n=this._getOrReturnCtx(e);return x(n,{code:y.invalid_type,expected:b.number,received:n.parsedType}),T}let s;const a=new te;for(const n of this._def.checks)n.kind==="int"?R.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{code:y.invalid_type,expected:"integer",received:"float",message:n.message}),a.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),x(s,{code:y.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),a.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),x(s,{code:y.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),a.dirty()):n.kind==="multipleOf"?Ws(e.data,n.value)!==0&&(s=this._getOrReturnCtx(e,s),x(s,{code:y.not_multiple_of,multipleOf:n.value,message:n.message}),a.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{code:y.not_finite,message:n.message}),a.dirty()):R.assertNever(n);return{status:a.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,s,a){return new De({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:k.toString(a)}]})}_addCheck(e){return new De({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&R.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(r)&&Number.isFinite(e)}}De.create=t=>new De({checks:[],typeName:S.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...C(t)});class Ue extends E{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==b.bigint)return this._getInvalidInput(e);let s;const a=new te;for(const n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),x(s,{code:y.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),a.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),x(s,{code:y.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),a.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),x(s,{code:y.not_multiple_of,multipleOf:n.value,message:n.message}),a.dirty()):R.assertNever(n);return{status:a.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return x(r,{code:y.invalid_type,expected:b.bigint,received:r.parsedType}),T}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,s,a){return new Ue({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:k.toString(a)}]})}_addCheck(e){return new Ue({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ue.create=t=>new Ue({checks:[],typeName:S.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...C(t)});class or extends E{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==b.boolean){const s=this._getOrReturnCtx(e);return x(s,{code:y.invalid_type,expected:b.boolean,received:s.parsedType}),T}return ae(e.data)}}or.create=t=>new or({typeName:S.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...C(t)});class tt extends E{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==b.date){const n=this._getOrReturnCtx(e);return x(n,{code:y.invalid_type,expected:b.date,received:n.parsedType}),T}if(Number.isNaN(e.data.getTime())){const n=this._getOrReturnCtx(e);return x(n,{code:y.invalid_date}),T}const s=new te;let a;for(const n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(a=this._getOrReturnCtx(e,a),x(a,{code:y.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),s.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(a=this._getOrReturnCtx(e,a),x(a,{code:y.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),s.dirty()):R.assertNever(n);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tt({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}tt.create=t=>new tt({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:S.ZodDate,...C(t)});class dr extends E{_parse(e){if(this._getType(e)!==b.symbol){const s=this._getOrReturnCtx(e);return x(s,{code:y.invalid_type,expected:b.symbol,received:s.parsedType}),T}return ae(e.data)}}dr.create=t=>new dr({typeName:S.ZodSymbol,...C(t)});class lr extends E{_parse(e){if(this._getType(e)!==b.undefined){const s=this._getOrReturnCtx(e);return x(s,{code:y.invalid_type,expected:b.undefined,received:s.parsedType}),T}return ae(e.data)}}lr.create=t=>new lr({typeName:S.ZodUndefined,...C(t)});class cr extends E{_parse(e){if(this._getType(e)!==b.null){const s=this._getOrReturnCtx(e);return x(s,{code:y.invalid_type,expected:b.null,received:s.parsedType}),T}return ae(e.data)}}cr.create=t=>new cr({typeName:S.ZodNull,...C(t)});class ur extends E{constructor(){super(...arguments),this._any=!0}_parse(e){return ae(e.data)}}ur.create=t=>new ur({typeName:S.ZodAny,...C(t)});class fr extends E{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ae(e.data)}}fr.create=t=>new fr({typeName:S.ZodUnknown,...C(t)});class Ae extends E{_parse(e){const r=this._getOrReturnCtx(e);return x(r,{code:y.invalid_type,expected:b.never,received:r.parsedType}),T}}Ae.create=t=>new Ae({typeName:S.ZodNever,...C(t)});class hr extends E{_parse(e){if(this._getType(e)!==b.undefined){const s=this._getOrReturnCtx(e);return x(s,{code:y.invalid_type,expected:b.void,received:s.parsedType}),T}return ae(e.data)}}hr.create=t=>new hr({typeName:S.ZodVoid,...C(t)});class me extends E{_parse(e){const{ctx:r,status:s}=this._processInputParams(e),a=this._def;if(r.parsedType!==b.array)return x(r,{code:y.invalid_type,expected:b.array,received:r.parsedType}),T;if(a.exactLength!==null){const i=r.data.length>a.exactLength.value,d=r.data.length<a.exactLength.value;(i||d)&&(x(r,{code:i?y.too_big:y.too_small,minimum:d?a.exactLength.value:void 0,maximum:i?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),s.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(x(r,{code:y.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),s.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(x(r,{code:y.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((i,d)=>a.type._parseAsync(new Ne(r,i,r.path,d)))).then(i=>te.mergeArray(s,i));const n=[...r.data].map((i,d)=>a.type._parseSync(new Ne(r,i,r.path,d)));return te.mergeArray(s,n)}get element(){return this._def.type}min(e,r){return new me({...this._def,minLength:{value:e,message:k.toString(r)}})}max(e,r){return new me({...this._def,maxLength:{value:e,message:k.toString(r)}})}length(e,r){return new me({...this._def,exactLength:{value:e,message:k.toString(r)}})}nonempty(e){return this.min(1,e)}}me.create=(t,e)=>new me({type:t,minLength:null,maxLength:null,exactLength:null,typeName:S.ZodArray,...C(e)});function Ee(t){if(t instanceof B){const e={};for(const r in t.shape){const s=t.shape[r];e[r]=ke.create(Ee(s))}return new B({...t._def,shape:()=>e})}else return t instanceof me?new me({...t._def,type:Ee(t.element)}):t instanceof ke?ke.create(Ee(t.unwrap())):t instanceof Fe?Fe.create(Ee(t.unwrap())):t instanceof Se?Se.create(t.items.map(e=>Ee(e))):t}class B extends E{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=R.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==b.object){const f=this._getOrReturnCtx(e);return x(f,{code:y.invalid_type,expected:b.object,received:f.parsedType}),T}const{status:s,ctx:a}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),d=[];if(!(this._def.catchall instanceof Ae&&this._def.unknownKeys==="strip"))for(const f in a.data)i.includes(f)||d.push(f);const h=[];for(const f of i){const m=n[f],j=a.data[f];h.push({key:{status:"valid",value:f},value:m._parse(new Ne(a,j,a.path,f)),alwaysSet:f in a.data})}if(this._def.catchall instanceof Ae){const f=this._def.unknownKeys;if(f==="passthrough")for(const m of d)h.push({key:{status:"valid",value:m},value:{status:"valid",value:a.data[m]}});else if(f==="strict")d.length>0&&(x(a,{code:y.unrecognized_keys,keys:d}),s.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const m of d){const j=a.data[m];h.push({key:{status:"valid",value:m},value:f._parse(new Ne(a,j,a.path,m)),alwaysSet:m in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const f=[];for(const m of h){const j=await m.key,w=await m.value;f.push({key:j,value:w,alwaysSet:m.alwaysSet})}return f}).then(f=>te.mergeObjectSync(s,f)):te.mergeObjectSync(s,h)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new B({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,s)=>{var n,i;const a=((i=(n=this._def).errorMap)==null?void 0:i.call(n,r,s).message)??s.defaultError;return r.code==="unrecognized_keys"?{message:k.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new B({...this._def,unknownKeys:"strip"})}passthrough(){return new B({...this._def,unknownKeys:"passthrough"})}extend(e){return new B({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new B({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:S.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new B({...this._def,catchall:e})}pick(e){const r={};for(const s of R.objectKeys(e))e[s]&&this.shape[s]&&(r[s]=this.shape[s]);return new B({...this._def,shape:()=>r})}omit(e){const r={};for(const s of R.objectKeys(this.shape))e[s]||(r[s]=this.shape[s]);return new B({...this._def,shape:()=>r})}deepPartial(){return Ee(this)}partial(e){const r={};for(const s of R.objectKeys(this.shape)){const a=this.shape[s];e&&!e[s]?r[s]=a:r[s]=a.optional()}return new B({...this._def,shape:()=>r})}required(e){const r={};for(const s of R.objectKeys(this.shape))if(e&&!e[s])r[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof ke;)n=n._def.innerType;r[s]=n}return new B({...this._def,shape:()=>r})}keyof(){return Vr(R.objectKeys(this.shape))}}B.create=(t,e)=>new B({shape:()=>t,unknownKeys:"strip",catchall:Ae.create(),typeName:S.ZodObject,...C(e)});B.strictCreate=(t,e)=>new B({shape:()=>t,unknownKeys:"strict",catchall:Ae.create(),typeName:S.ZodObject,...C(e)});B.lazycreate=(t,e)=>new B({shape:t,unknownKeys:"strip",catchall:Ae.create(),typeName:S.ZodObject,...C(e)});class rt extends E{_parse(e){const{ctx:r}=this._processInputParams(e),s=this._def.options;function a(n){for(const d of n)if(d.result.status==="valid")return d.result;for(const d of n)if(d.result.status==="dirty")return r.common.issues.push(...d.ctx.common.issues),d.result;const i=n.map(d=>new ge(d.ctx.common.issues));return x(r,{code:y.invalid_union,unionErrors:i}),T}if(r.common.async)return Promise.all(s.map(async n=>{const i={...r,common:{...r.common,issues:[]},parent:null};return{result:await n._parseAsync({data:r.data,path:r.path,parent:i}),ctx:i}})).then(a);{let n;const i=[];for(const h of s){const f={...r,common:{...r.common,issues:[]},parent:null},m=h._parseSync({data:r.data,path:r.path,parent:f});if(m.status==="valid")return m;m.status==="dirty"&&!n&&(n={result:m,ctx:f}),f.common.issues.length&&i.push(f.common.issues)}if(n)return r.common.issues.push(...n.ctx.common.issues),n.result;const d=i.map(h=>new ge(h));return x(r,{code:y.invalid_union,unionErrors:d}),T}}get options(){return this._def.options}}rt.create=(t,e)=>new rt({options:t,typeName:S.ZodUnion,...C(e)});function xt(t,e){const r=ve(t),s=ve(e);if(t===e)return{valid:!0,data:t};if(r===b.object&&s===b.object){const a=R.objectKeys(e),n=R.objectKeys(t).filter(d=>a.indexOf(d)!==-1),i={...t,...e};for(const d of n){const h=xt(t[d],e[d]);if(!h.valid)return{valid:!1};i[d]=h.data}return{valid:!0,data:i}}else if(r===b.array&&s===b.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let n=0;n<t.length;n++){const i=t[n],d=e[n],h=xt(i,d);if(!h.valid)return{valid:!1};a.push(h.data)}return{valid:!0,data:a}}else return r===b.date&&s===b.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class st extends E{_parse(e){const{status:r,ctx:s}=this._processInputParams(e),a=(n,i)=>{if(ar(n)||ar(i))return T;const d=xt(n.value,i.value);return d.valid?((nr(n)||nr(i))&&r.dirty(),{status:r.value,value:d.data}):(x(s,{code:y.invalid_intersection_types}),T)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([n,i])=>a(n,i)):a(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}st.create=(t,e,r)=>new st({left:t,right:e,typeName:S.ZodIntersection,...C(r)});class Se extends E{_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==b.array)return x(s,{code:y.invalid_type,expected:b.array,received:s.parsedType}),T;if(s.data.length<this._def.items.length)return x(s,{code:y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),T;!this._def.rest&&s.data.length>this._def.items.length&&(x(s,{code:y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const n=[...s.data].map((i,d)=>{const h=this._def.items[d]||this._def.rest;return h?h._parse(new Ne(s,i,s.path,d)):null}).filter(i=>!!i);return s.common.async?Promise.all(n).then(i=>te.mergeArray(r,i)):te.mergeArray(r,n)}get items(){return this._def.items}rest(e){return new Se({...this._def,rest:e})}}Se.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Se({items:t,typeName:S.ZodTuple,rest:null,...C(e)})};class mr extends E{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==b.map)return x(s,{code:y.invalid_type,expected:b.map,received:s.parsedType}),T;const a=this._def.keyType,n=this._def.valueType,i=[...s.data.entries()].map(([d,h],f)=>({key:a._parse(new Ne(s,d,s.path,[f,"key"])),value:n._parse(new Ne(s,h,s.path,[f,"value"]))}));if(s.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const h of i){const f=await h.key,m=await h.value;if(f.status==="aborted"||m.status==="aborted")return T;(f.status==="dirty"||m.status==="dirty")&&r.dirty(),d.set(f.value,m.value)}return{status:r.value,value:d}})}else{const d=new Map;for(const h of i){const f=h.key,m=h.value;if(f.status==="aborted"||m.status==="aborted")return T;(f.status==="dirty"||m.status==="dirty")&&r.dirty(),d.set(f.value,m.value)}return{status:r.value,value:d}}}}mr.create=(t,e,r)=>new mr({valueType:e,keyType:t,typeName:S.ZodMap,...C(r)});class Be extends E{_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==b.set)return x(s,{code:y.invalid_type,expected:b.set,received:s.parsedType}),T;const a=this._def;a.minSize!==null&&s.data.size<a.minSize.value&&(x(s,{code:y.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&s.data.size>a.maxSize.value&&(x(s,{code:y.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const n=this._def.valueType;function i(h){const f=new Set;for(const m of h){if(m.status==="aborted")return T;m.status==="dirty"&&r.dirty(),f.add(m.value)}return{status:r.value,value:f}}const d=[...s.data.values()].map((h,f)=>n._parse(new Ne(s,h,s.path,f)));return s.common.async?Promise.all(d).then(h=>i(h)):i(d)}min(e,r){return new Be({...this._def,minSize:{value:e,message:k.toString(r)}})}max(e,r){return new Be({...this._def,maxSize:{value:e,message:k.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Be.create=(t,e)=>new Be({valueType:t,minSize:null,maxSize:null,typeName:S.ZodSet,...C(e)});class yr extends E{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}yr.create=(t,e)=>new yr({getter:t,typeName:S.ZodLazy,...C(e)});class gr extends E{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return x(r,{received:r.data,code:y.invalid_literal,expected:this._def.value}),T}return{status:"valid",value:e.data}}get value(){return this._def.value}}gr.create=(t,e)=>new gr({value:t,typeName:S.ZodLiteral,...C(e)});function Vr(t,e){return new Re({values:t,typeName:S.ZodEnum,...C(e)})}class Re extends E{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),s=this._def.values;return x(r,{expected:R.joinValues(s),received:r.parsedType,code:y.invalid_type}),T}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),s=this._def.values;return x(r,{received:r.data,code:y.invalid_enum_value,options:s}),T}return ae(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Re.create(e,{...this._def,...r})}exclude(e,r=this._def){return Re.create(this.options.filter(s=>!e.includes(s)),{...this._def,...r})}}Re.create=Vr;class pr extends E{_parse(e){const r=R.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==b.string&&s.parsedType!==b.number){const a=R.objectValues(r);return x(s,{expected:R.joinValues(a),received:s.parsedType,code:y.invalid_type}),T}if(this._cache||(this._cache=new Set(R.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=R.objectValues(r);return x(s,{received:s.data,code:y.invalid_enum_value,options:a}),T}return ae(e.data)}get enum(){return this._def.values}}pr.create=(t,e)=>new pr({values:t,typeName:S.ZodNativeEnum,...C(e)});class at extends E{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==b.promise&&r.common.async===!1)return x(r,{code:y.invalid_type,expected:b.promise,received:r.parsedType}),T;const s=r.parsedType===b.promise?r.data:Promise.resolve(r.data);return ae(s.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}at.create=(t,e)=>new at({type:t,typeName:S.ZodPromise,...C(e)});class Ie extends E{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===S.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:s}=this._processInputParams(e),a=this._def.effect||null,n={addIssue:i=>{x(s,i),i.fatal?r.abort():r.dirty()},get path(){return s.path}};if(n.addIssue=n.addIssue.bind(n),a.type==="preprocess"){const i=a.transform(s.data,n);if(s.common.async)return Promise.resolve(i).then(async d=>{if(r.value==="aborted")return T;const h=await this._def.schema._parseAsync({data:d,path:s.path,parent:s});return h.status==="aborted"?T:h.status==="dirty"||r.value==="dirty"?$e(h.value):h});{if(r.value==="aborted")return T;const d=this._def.schema._parseSync({data:i,path:s.path,parent:s});return d.status==="aborted"?T:d.status==="dirty"||r.value==="dirty"?$e(d.value):d}}if(a.type==="refinement"){const i=d=>{const h=a.refinement(d,n);if(s.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(s.common.async===!1){const d=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return d.status==="aborted"?T:(d.status==="dirty"&&r.dirty(),i(d.value),{status:r.value,value:d.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(d=>d.status==="aborted"?T:(d.status==="dirty"&&r.dirty(),i(d.value).then(()=>({status:r.value,value:d.value}))))}if(a.type==="transform")if(s.common.async===!1){const i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Ve(i))return T;const d=a.transform(i.value,n);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:d}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>Ve(i)?Promise.resolve(a.transform(i.value,n)).then(d=>({status:r.value,value:d})):T);R.assertNever(a)}}Ie.create=(t,e,r)=>new Ie({schema:t,typeName:S.ZodEffects,effect:e,...C(r)});Ie.createWithPreprocess=(t,e,r)=>new Ie({schema:e,effect:{type:"preprocess",transform:t},typeName:S.ZodEffects,...C(r)});class ke extends E{_parse(e){return this._getType(e)===b.undefined?ae(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ke.create=(t,e)=>new ke({innerType:t,typeName:S.ZodOptional,...C(e)});class Fe extends E{_parse(e){return this._getType(e)===b.null?ae(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fe.create=(t,e)=>new Fe({innerType:t,typeName:S.ZodNullable,...C(e)});class vt extends E{_parse(e){const{ctx:r}=this._processInputParams(e);let s=r.data;return r.parsedType===b.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}vt.create=(t,e)=>new vt({innerType:t,typeName:S.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...C(e)});class _t extends E{_parse(e){const{ctx:r}=this._processInputParams(e),s={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return et(a)?a.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new ge(s.common.issues)},input:s.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ge(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}_t.create=(t,e)=>new _t({innerType:t,typeName:S.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...C(e)});class xr extends E{_parse(e){if(this._getType(e)!==b.nan){const s=this._getOrReturnCtx(e);return x(s,{code:y.invalid_type,expected:b.nan,received:s.parsedType}),T}return{status:"valid",value:e.data}}}xr.create=t=>new xr({typeName:S.ZodNaN,...C(t)});class qs extends E{_parse(e){const{ctx:r}=this._processInputParams(e),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}}class St extends E{_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?T:n.status==="dirty"?(r.dirty(),$e(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{const a=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?T:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:s.path,parent:s})}}static create(e,r){return new St({in:e,out:r,typeName:S.ZodPipeline})}}class bt extends E{_parse(e){const r=this._def.innerType._parse(e),s=a=>(Ve(a)&&(a.value=Object.freeze(a.value)),a);return et(r)?r.then(a=>s(a)):s(r)}unwrap(){return this._def.innerType}}bt.create=(t,e)=>new bt({innerType:t,typeName:S.ZodReadonly,...C(e)});var S;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(S||(S={}));const we=be.create,Ct=De.create;Ae.create;me.create;const Ot=B.create;rt.create;st.create;Se.create;const Hs=Re.create;at.create;ke.create;Fe.create;const vr=(t,e,r)=>{if(t&&"reportValidity"in t){const s=_(r,e);t.setCustomValidity(s&&s.message||""),t.reportValidity()}},Dr=(t,e)=>{for(const r in e.fields){const s=e.fields[r];s&&s.ref&&"reportValidity"in s.ref?vr(s.ref,r,t):s&&s.refs&&s.refs.forEach(a=>vr(a,r,t))}},Js=(t,e)=>{e.shouldUseNativeValidation&&Dr(t,e);const r={};for(const s in t){const a=_(e.fields,s),n=Object.assign(t[s]||{},{ref:a&&a.ref});if(Ys(e.names||Object.keys(t),s)){const i=Object.assign({},_(r,s));M(i,"root",n),M(r,s,i)}else M(r,s,n)}return r},Ys=(t,e)=>{const r=_r(e);return t.some(s=>_r(s).match(`^${r}\\.\\d+`))};function _r(t){return t.replace(/\]|\[/g,"")}function Xs(t,e){for(var r={};t.length;){var s=t[0],a=s.code,n=s.message,i=s.path.join(".");if(!r[i])if("unionErrors"in s){var d=s.unionErrors[0].errors[0];r[i]={message:d.message,type:d.code}}else r[i]={message:n,type:a};if("unionErrors"in s&&s.unionErrors.forEach(function(m){return m.errors.forEach(function(j){return t.push(j)})}),e){var h=r[i].types,f=h&&h[s.code];r[i]=wr(i,e,r,a,f?[].concat(f,s.message):s.message)}t.shift()}return r}function Et(t,e,r){return r===void 0&&(r={}),function(s,a,n){try{return Promise.resolve(function(i,d){try{var h=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](s,e)).then(function(f){return n.shouldUseNativeValidation&&Dr({},n),{errors:{},values:r.raw?Object.assign({},s):f}})}catch(f){return d(f)}return h&&h.then?h.then(void 0,d):h}(0,function(i){if(function(d){return Array.isArray(d==null?void 0:d.errors)}(i))return{values:{},errors:Js(Xs(i.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw i}))}catch(i){return Promise.reject(i)}}}const Gs=Ot({amount:Ct().min(.01,"Amount must be greater than zero"),description:we().min(1,"Description is required"),date:we().refine(t=>!isNaN(Date.parse(t)),"Invalid date format"),destinationAccount:we().min(10,"Destination account is required").max(34,"Account number too long").regex(/^[A-Z0-9]+$/,"Invalid account format")}),Qs=({setSelected:t})=>{const{state:e,dispatch:r}=We("TransferForm"),{showAlert:s}=nt(),a=it(),{register:n,handleSubmit:i,watch:d,reset:h,formState:{errors:f}}=Tt({resolver:Et(Gs),defaultValues:{amount:0,description:"",date:new Date().toISOString().split("T")[0],destinationAccount:""}}),m=d("amount"),j=e.transactions.filter(O=>O.type==="Deposit").reduce((O,V)=>O+V.amount,0),w=m>j,I=O=>{const V={id:kt(),date:O.date,amount:-Math.abs(O.amount),description:O.description,type:"Withdrawal"};r({type:"ADD",payload:V}),s({message:"Operation was completed successfully",type:"success"}),h(),t==null||t(null),a("/transactions-history")};return c.jsxs("form",{onSubmit:i(I),className:"bg-gray-50 dark:bg-background-extra-dark rounded-xl p-4 sm:p-6 shadow space-y-6 max-w-lg mx-auto relative z-10",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"New Transfer"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 block mb-1",children:"Amount (â‚¬)"}),c.jsx("input",{type:"number",step:"0.01",...n("amount",{valueAsNumber:!0}),className:de("w-full rounded-md px-3 py-2 border","bg-white dark:bg-background-dark","text-gray-900 dark:text-white",f.amount?"border-red-500":"border-gray-300")}),f.amount&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:f.amount.message}),w&&c.jsx("p",{className:"text-xs text-orange-500 mt-1",children:"Insufficient balance"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 block mb-1",children:"Destination Account"}),c.jsx("input",{type:"text",...n("destinationAccount"),className:de("w-full rounded-md px-3 py-2 border","bg-white dark:bg-background-dark","text-gray-900 dark:text-white",f.destinationAccount?"border-red-500":"border-gray-300"),placeholder:"ESXX "}),f.destinationAccount&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:f.destinationAccount.message})]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 block mb-1",children:"Description"}),c.jsx("input",{type:"text",...n("description"),className:de("w-full rounded-md px-3 py-2 border","bg-white dark:bg-background-dark","text-gray-900 dark:text-white",f.description?"border-red-500":"border-gray-300")}),f.description&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:f.description.message})]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 block mb-1",children:"Date"}),c.jsx("input",{type:"date",...n("date"),className:de("w-full rounded-md px-3 py-2 border","bg-white dark:bg-background-dark","text-gray-900 dark:text-white",f.date?"border-red-500":"border-gray-300"),min:new Date().toISOString().split("T")[0]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[c.jsx("button",{type:"submit",disabled:w,className:"bg-rose-base hover:bg-rose-hover text-white font-medium py-2 px-4 rounded-md transition",children:"Make a Transfer"}),c.jsx("button",{type:"button",disabled:w,className:"bg-gray-500 hover:bg-rose-hover text-white font-medium py-2 px-4 rounded-md transition",onClick:()=>t==null?void 0:t(null),children:"Cancel"})]})]})},Ks=Ot({amount:Ct().min(.01,"Amount must be greater than zero"),description:we().min(1,"Description is required"),date:we().refine(t=>!isNaN(Date.parse(t)),"Invalid date format"),phone:we().regex(/^(\+34|34)?[6-7][0-9]{8}$/,"Invalid Spanish phone number")}),ea=({onSuccess:t,setSelected:e})=>{const{state:r,dispatch:s}=We("BizumForm"),{showAlert:a}=nt(),n=it(),{register:i,handleSubmit:d,watch:h,reset:f,formState:{errors:m}}=Tt({resolver:Et(Ks),defaultValues:{amount:0,description:"",date:new Date().toISOString().split("T")[0],phone:""}}),j=h("amount"),w=r.transactions.filter(L=>L.type==="Deposit").reduce((L,re)=>L+re.amount,0),I=j>w,O=L=>{localStorage.setItem("transactionsData",JSON.stringify(L))},V=L=>{const re={id:kt(),date:L.date,amount:-Math.abs(L.amount),description:`${L.description} (to ${L.phone})`,type:"Withdrawal"};let A;s({type:"ADD",payload:re}),A=[...r.transactions,re],a({message:"Operation was completed successfully",type:"success"}),O(A),f(),t==null||t(),e==null||e(null),n("/transactions-history")};return c.jsxs("form",{onSubmit:d(V),className:"bg-gray-50 dark:bg-background-extra-dark rounded-xl p-4 sm:p-6 shadow space-y-6 max-w-lg mx-auto relative z-10",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Send Bizum"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 block mb-1",children:"Amount (â‚¬)"}),c.jsx("input",{type:"number",step:"0.01",...i("amount",{valueAsNumber:!0}),className:de("w-full rounded-md px-3 py-2 border","bg-white dark:bg-background-dark","text-gray-900 dark:text-white",m.amount?"border-red-500":"border-gray-300")}),m.amount&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.amount.message}),I&&c.jsx("p",{className:"text-xs text-orange-500 mt-1",children:"Insufficient balance for Bizum"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 block mb-1",children:"Recipient Phone"}),c.jsx("input",{type:"tel",...i("phone"),placeholder:"+34612345678",className:de("w-full rounded-md px-3 py-2 border","bg-white dark:bg-background-dark","text-gray-900 dark:text-white",m.phone?"border-red-500":"border-gray-300")}),m.phone&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.phone.message})]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 block mb-1",children:"Description"}),c.jsx("input",{type:"text",...i("description"),className:de("w-full rounded-md px-3 py-2 border","bg-white dark:bg-background-dark","text-gray-900 dark:text-white",m.description?"border-red-500":"border-gray-300")}),m.description&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.description.message})]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 block mb-1",children:"Date"}),c.jsx("input",{type:"date",...i("date"),className:de("w-full rounded-md px-3 py-2 border","bg-white dark:bg-background-dark","text-gray-900 dark:text-white",m.date?"border-red-500":"border-gray-300"),min:new Date().toISOString().split("T")[0],max:new Date().toISOString().split("T")[0]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"By default, the date is set to today. Due to the type of operation, the date cannot be changed"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[c.jsx("button",{type:"submit",disabled:I,className:"bg-rose-base hover:bg-rose-hover text-white font-medium py-2 px-4 rounded-md transition",children:"Send Bizum"}),c.jsx("button",{type:"button",className:"bg-gray-500 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-md transition",onClick:()=>e==null?void 0:e(null),children:"Cancel"})]})]})},ta=[{value:"Deposit",label:"Deposit"},{value:"Withdrawal",label:"Withdrawal"}],ra=Ot({type:Hs(["Deposit","Withdrawal"]),amount:Ct().min(.01,"Amount must be greater than zero"),description:we().min(1,"Description is required"),date:we().refine(t=>!isNaN(Date.parse(t)),"Invalid date format")}),sa=({setSelected:t})=>{const{state:e,dispatch:r}=We("TransactionForm"),{showAlert:s}=nt(),a=it(),{register:n,handleSubmit:i,watch:d,reset:h,setValue:f,formState:{errors:m}}=Tt({resolver:Et(ra),defaultValues:{type:"Withdrawal",amount:0,description:"",date:new Date().toISOString().split("T")[0]}}),j=d("type"),w=d("amount"),I=e.transactions.reduce((A,P)=>A+P.amount,0),O=j==="Withdrawal"&&w>I,V=A=>{localStorage.setItem("transactionsData",JSON.stringify(A))},L=A=>{const P={id:kt(),date:A.date,amount:A.type==="Withdrawal"?-Math.abs(A.amount):Math.abs(A.amount),description:A.description,type:A.type};let X=[];r({type:"ADD",payload:P}),X=[...e.transactions,P],s({message:"Operation was completed successfully",type:"success"}),V(X),h(),t==null||t(null),a("/transactions-history")},re=A=>{f("type",A)};return c.jsxs("form",{onSubmit:i(L),className:"bg-gray-50 dark:bg-background-extra-dark rounded-xl p-4 sm:p-6 shadow space-y-6 max-w-lg mx-auto relative z-10",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j==="Withdrawal"?"New Withdrawal":"New Deposit"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 block mb-1",children:"Operation type"}),c.jsx(Hr,{name:"type",value:j,options:ta,onChange:re})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 block mb-1",children:"Amount (â‚¬)"}),c.jsx("input",{type:"number",step:"0.01",...n("amount",{valueAsNumber:!0}),className:de("w-full rounded-md px-3 py-2 border","bg-white dark:bg-background-dark","text-gray-900 dark:text-white",m.amount?"border-red-500":"border-gray-300")}),m.amount&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.amount.message}),O&&c.jsx("p",{className:"text-xs text-orange-500 mt-1",children:"Insufficient balance"})]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 block mb-1",children:"Description"}),c.jsx("input",{type:"text",...n("description"),className:de("w-full rounded-md px-3 py-2 border","bg-white dark:bg-background-dark","text-gray-900 dark:text-white",m.description?"border-red-500":"border-gray-300")}),m.description&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.description.message})]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 block mb-1",children:"Date"}),c.jsx("input",{type:"date",...n("date"),className:de("w-full rounded-md px-3 py-2 border","bg-white dark:bg-background-dark","text-gray-900 dark:text-white",m.date?"border-red-500":"border-gray-300"),min:new Date().toISOString().split("T")[0],max:new Date().toISOString().split("T")[0]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"By default, the date is set to today. Due to the type of operation, the date cannot be changed"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[c.jsx("button",{type:"submit",disabled:O,className:"bg-rose-base hover:bg-rose-hover text-white font-medium py-2 px-4 rounded-md transition",children:j==="Withdrawal"?"Withdraw Money":"Deposit Money"}),c.jsx("button",{type:"button",className:"bg-gray-500 hover:bg-rose-hover text-white font-medium py-2 px-4 rounded-md transition",onClick:()=>t==null?void 0:t(null),children:"Cancel"})]})]})},aa=({isOpen:t,onClose:e,title:r,children:s})=>{const a=Y.useRef(null),n=Y.useRef(null);return Y.useEffect(()=>{var h;if(!t)return;n.current=document.activeElement;const i=(h=a.current)==null?void 0:h.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');i==null||i.focus();const d=f=>{f.key==="Escape"&&e()};return document.addEventListener("keydown",d),()=>{var f;document.removeEventListener("keydown",d),(f=n.current)==null||f.focus()}},[t,e]),t?c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 dark:bg-black/60","aria-modal":"true",role:"dialog","aria-labelledby":"modal-title",children:[c.jsx("div",{className:"absolute inset-0",onClick:e,"aria-hidden":"true"}),c.jsxs("div",{ref:a,className:"relative z-10 w-full max-w-md p-6 rounded-xl shadow-lg bg-white dark:bg-background-dark mx-4 transition-colors",children:[c.jsx("h2",{id:"modal-title",className:"text-lg font-semibold text-gray-900 dark:text-white",children:r}),c.jsx("div",{className:"mt-4 text-gray-800 dark:text-gray-200",children:s}),c.jsx("div",{className:"mt-6 flex justify-end gap-2",children:c.jsx("button",{onClick:e,className:"w-20 px-4 py-2 text-sm bg-gray-200 dark:border dark:border-rose-base dark:bg-gray-600 text-gray-800 dark:text-white rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})})]})]}):null},na=({isOpen:t,onClose:e,mode:r,transaction:s,onSubmit:a})=>{const[n,i]=Y.useState({date:s.date,amount:s.amount,description:s.description}),d=f=>{const{name:m,value:j}=f.target;i(w=>({...w,[m]:m==="amount"?Number(j):j}))},h=()=>{const f={...s,...n,id:r==="reuse"?crypto.randomUUID():s.id};a(f),e()};return c.jsx(aa,{isOpen:t,onClose:e,title:r==="update"?"Update Transaction":"Reuse Transaction",children:c.jsxs("form",{onSubmit:f=>{f.preventDefault(),h()},className:"space-y-5",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date"}),c.jsx("input",{id:"date",type:"date",name:"date",value:n.date,onChange:d,required:!0,min:n.date?n.date:new Date().toISOString().split("T")[0],className:"w-full mt-1 p-2 border rounded bg-white dark:bg-zinc-700 dark:border-gray-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount"}),c.jsx("input",{id:"amount",type:"number",name:"amount",value:n.amount,onChange:d,required:!0,className:"w-full mt-1 p-2 border rounded bg-white dark:bg-zinc-700 dark:border-gray-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),c.jsx("input",{id:"description",type:"text",name:"description",value:n.description,onChange:d,required:!0,className:"w-full mt-1 p-2 border rounded bg-white dark:bg-zinc-700 dark:border-gray-600 dark:text-white"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",className:"w-20 px-4 py-2 text-sm font-medium rounded bg-rose-base text-white hover:bg-rose-hover focus:outline-none focus:ring-2 focus:ring-rose-active dark:focus:ring-rose-active",children:r==="update"?"Update":"Reuse"})})]})})},ia=()=>{const{showAlert:t}=nt(),e=it(),{dispatch:r}=We("TransactionFormEntry"),[s,a]=Y.useState(null),[n,i]=Y.useState(null),[d,h]=Y.useState(null),[f,m]=Y.useState(!1),[j,w]=Y.useState(null),I=P=>a(P),O=(P,X)=>{h(P),i(X)},V=()=>{h(null),i(null)},L=P=>{r({type:n==="update"?"EDIT":"ADD",payload:P}),t({message:"Operation was completed successfully",type:"success"}),e("/transactions-history")},re=P=>{w(P),m(!0)},A=()=>{j&&(r({type:"REMOVE",payload:j.id}),t({message:"Operation was deleted successfully",type:"success"}),w(null)),m(!1)};return c.jsxs("div",{className:"px-4 sm:px-6",children:[!s&&c.jsx(Kr,{onSelect:I}),s&&c.jsxs("div",{className:"mt-6",children:[s==="transfer"&&c.jsx(Qs,{setSelected:a}),s==="bizum"&&c.jsx(ea,{setSelected:a}),s==="withdrawal"&&c.jsx(sa,{setSelected:a}),s==="undo"&&c.jsx(Bt,{title:"Select operation to UNDO",setSelected:a,onClick:re}),(s==="update"||s==="reuse")&&c.jsx(Bt,{title:`Select operation to ${s.toUpperCase()}`,setSelected:a,onClick:P=>O(P,s)})]}),d&&n&&c.jsx(na,{isOpen:!!d,onClose:V,mode:n,transaction:d,onSubmit:L}),c.jsx(es,{isOpen:f,onClose:()=>{m(!1),w(null)},onConfirm:A,title:"Confirm Undo Action",description:"Are you sure you want to delete this transaction?"})]})};function ua(){return c.jsx(ia,{})}export{ua as default};
